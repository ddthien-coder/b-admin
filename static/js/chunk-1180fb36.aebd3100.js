(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1180fb36"],{"0fa7":function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{ref:"formRef",attrs:{model:e.form,rules:e.formRules,"label-position":"top"}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"Title",prop:"title"}},[r("el-input",{attrs:{placeholder:"Please enter a title"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"videoId",prop:"videoId"}},[r("el-input",{attrs:{placeholder:"ex: https://www.youtube.com/watch?v=RjG-TYC_RWo"},model:{value:e.form.videoId,callback:function(t){e.$set(e.form,"videoId",t)},expression:"form.videoId"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"createYear",prop:"createYear"}},[r("el-input",{attrs:{placeholder:"please enter create year showreel"},model:{value:e.form.createYear,callback:function(t){e.$set(e.form,"createYear",t)},expression:"form.createYear"}})],1)],1)],1),r("el-form-item",{attrs:{label:"Description",prop:"description"}},[r("mavon-editor",{attrs:{language:"en"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),r("el-form-item",{attrs:{label:"Content",prop:"content"}},[r("mavon-editor",{attrs:{language:"en"},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"Cate",prop:"cate"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Please select a category (enter to add a new category)","allow-create":!0,filterable:!0},model:{value:e.form.cate,callback:function(t){e.$set(e.form,"cate",t)},expression:"form.cate"}},e._l(e.categoryList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"Label",prop:"tagList"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Please select a label (enter to add a new label)","allow-create":!0,filterable:!0,multiple:!0},model:{value:e.form.tagList,callback:function(t){e.$set(e.form,"tagList",t)},expression:"form.tagList"}},e._l(e.tagList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"Word count",prop:"words"}},[r("el-input",{attrs:{placeholder:"Please enter the number of words in the Showreel (the reading time is automatically calculated)",type:"number"},model:{value:e.form.words,callback:function(t){e.$set(e.form,"words",t)},expression:"form.words"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"Time (minutes)",prop:"readTime"}},[r("el-input",{attrs:{placeholder:"Please enter the reading time (optional) Default Math.round (word count / 200)",type:"number"},model:{value:e.form.readTime,callback:function(t){e.$set(e.form,"readTime",t)},expression:"form.readTime"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"Views",prop:"views"}},[r("el-input",{attrs:{placeholder:"Please enter the number of words in the Showreel (optional) The default is 0 ",type:"number"},model:{value:e.form.views,callback:function(t){e.$set(e.form,"views",t)},expression:"form.views"}})],1)],1)],1),r("el-form-item",{staticStyle:{"text-align":"right"}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("Save")])],1)],1),r("el-dialog",{attrs:{title:"Visibility",width:"50%",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-form",{attrs:{"label-width":"50px"},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-form-item",[r("el-radio-group",{model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[r("el-radio",{attrs:{label:1}},[e._v("Public")]),r("el-radio",{attrs:{label:2}},[e._v("Private")]),r("el-radio",{attrs:{label:3}},[e._v("Password protection")])],1)],1),3===e.radio?r("el-form-item",{attrs:{label:"Password"}},[r("el-input",{model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1):e._e(),2!==e.radio?r("el-form-item",[r("el-row",[r("el-col",{attrs:{span:6}},[r("el-switch",{attrs:{"active-text":"Appreciation"},model:{value:e.form.appreciation,callback:function(t){e.$set(e.form,"appreciation",t)},expression:"form.appreciation"}})],1),r("el-col",{attrs:{span:6}},[r("el-switch",{attrs:{"active-text":"Recommend"},model:{value:e.form.recommend,callback:function(t){e.$set(e.form,"recommend",t)},expression:"form.recommend"}})],1),r("el-col",{attrs:{span:6}},[r("el-switch",{attrs:{"active-text":"Comment"},model:{value:e.form.commentEnabled,callback:function(t){e.$set(e.form,"commentEnabled",t)},expression:"form.commentEnabled"}})],1),r("el-col",{attrs:{span:6}},[r("el-switch",{attrs:{"active-text":"Top"},model:{value:e.form.top,callback:function(t){e.$set(e.form,"top",t)},expression:"form.top"}})],1)],1)],1):e._e()],1),r("span",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("Cancel")]),r("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("Save")])],1)],1)],1)},a=[],l=(r("d3b7"),r("159b"),r("6350")),i=r("864d"),n={name:"WriteBlog",components:{Breadcrumb:l["a"]},data:function(){return{categoryList:[],tagList:[],dialogVisible:!1,radio:1,form:{title:"",videoId:"",description:"",content:"",cate:null,tagList:[],words:null,readTime:null,views:0,appreciation:!1,recommend:!1,commentEnabled:!1,top:!1,published:!1,password:"",createYear:""},formRules:{title:[{required:!0,message:"Please enter a title",trigger:"change"}],videoId:[{required:!0,message:"Please enter the id",trigger:"change"}],createYear:[{required:!0,message:"Please enter year",trigger:"change"}],cate:[{required:!0,message:"Please select a type ",trigger:"change"}],tagList:[{required:!0,message:"Please select a label",trigger:"change"}],words:[{required:!0,message:"Please enter the number of words in the Showreel",trigger:"change"}]}}},watch:{"form.words":function(e){this.form.readTime=e?Math.round(e/200):null}},created:function(){this.getData(),this.$route.params.id&&this.getBlog(this.$route.params.id)},methods:{getData:function(){var e=this;Object(i["c"])().then((function(t){e.categoryList=t.data.categories,e.tagList=t.data.tags}))},getBlog:function(e){var t=this;Object(i["b"])(e).then((function(e){t.computeCategoryAndTag(e.data),t.form=e.data,console.log(t.form),t.radio=t.form.published?""!==t.form.password?3:1:2}))},computeCategoryAndTag:function(e){e.cate=e.category.id,e.tagList=[],e.tags.forEach((function(t){e.tagList.push(t.id)}))},submit:function(){var e=this;if(3===this.radio&&(""===this.form.password||null===this.form.password))return this.msgError("Password protection mode must fill in the password!");this.$refs.formRef.validate((function(t){if(!t)return e.dialogVisible=!1,e.msgError("Please fill in the necessary form items");2===e.radio?(e.form.appreciation=!1,e.form.recommend=!1,e.form.commentEnabled=!1,e.form.top=!1,e.form.published=!1):e.form.published=!0,3!==e.radio&&(e.form.password=""),e.$route.params.id?(e.form.category=null,e.form.tags=null,Object(i["f"])(e.form).then((function(t){e.msgSuccess(t.msg),e.$router.push("/bdigital/list")}))):Object(i["e"])(e.form).then((function(t){e.msgSuccess(t.msg),e.$router.push("/bdigital/list")}))}))}}},s=n,c=r("2877"),m=Object(c["a"])(s,o,a,!1,null,"39dcdc8c",null);t["default"]=m.exports},4020:function(e,t,r){"use strict";r("d3b7");var o=r("bc3a"),a=r.n(o),l=r("323e"),i=r.n(l),n=(r("a5d8"),r("5c96")),s=a.a.create({baseURL:"https://www.dev-demo.website/admin/",timeout:5e3}),c=a.a.CancelToken;s.interceptors.request.use((function(e){var t=window.localStorage.getItem("user")||"{}",r=JSON.parse(t);if("{}"!==t&&"ROLE_admin"!==r.role&&"get"!==e.method)return e.cancelToken=new c((function(e){e("Demo mode, operation is not allowed")})),e;i.a.start();var o=window.localStorage.getItem("token");return o&&(e.headers.Authorization=o),e}),(function(e){return console.info(e),Promise.reject(e)})),s.interceptors.response.use((function(e){i.a.done();var t=e.data;if(200!==t.code){var r=t.msg||"Error";return n["Message"].error(r),Promise.reject(new Error(r))}return t}),(function(e){return console.info(e),n["Message"].error(e.message),Promise.reject(e)})),t["a"]=s},"864d":function(e,t,r){"use strict";r.d(t,"d",(function(){return l})),r.d(t,"a",(function(){return i})),r.d(t,"c",(function(){return n})),r.d(t,"e",(function(){return s})),r.d(t,"h",(function(){return c})),r.d(t,"g",(function(){return m})),r.d(t,"i",(function(){return d})),r.d(t,"b",(function(){return u})),r.d(t,"f",(function(){return f}));var o=r("5530"),a=r("4020");function l(e){return Object(a["a"])({url:"blogs",method:"GET",params:Object(o["a"])({},e)})}function i(e){return Object(a["a"])({url:"blog",method:"DELETE",params:{id:e}})}function n(){return Object(a["a"])({url:"categoryAndTag",method:"GET"})}function s(e){return Object(a["a"])({url:"blog",method:"POST",data:Object(o["a"])({},e)})}function c(e,t){return Object(a["a"])({url:"blog/top",method:"PUT",params:{id:e,top:t}})}function m(e,t){return Object(a["a"])({url:"blog/recommend",method:"PUT",params:{id:e,recommend:t}})}function d(e,t){return Object(a["a"])({url:"blog/".concat(e,"/visibility"),method:"PUT",data:Object(o["a"])({},t)})}function u(e){return Object(a["a"])({url:"blog",method:"GET",params:{id:e}})}function f(e){return Object(a["a"])({url:"blog",method:"PUT",data:Object(o["a"])({},e)})}}}]);