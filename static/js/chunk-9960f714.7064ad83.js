(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9960f714"],{3693:function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-row",[o("el-col",{attrs:{span:8}},[o("el-input",{staticStyle:{"min-width":"500px"},attrs:{placeholder:"Please enter a title",clearable:!0,size:"small"},on:{clear:e.search},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.queryInfo.title,callback:function(t){e.$set(e.queryInfo,"title",t)},expression:"queryInfo.title"}},[o("el-select",{staticStyle:{width:"160px"},attrs:{slot:"prepend",placeholder:"Please select a type",clearable:!0},on:{change:e.search},slot:"prepend",model:{value:e.queryInfo.categoryId,callback:function(t){e.$set(e.queryInfo,"categoryId",t)},expression:"queryInfo.categoryId"}},e._l(e.categoryList,(function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),o("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.search},slot:"append"})],1)],1)],1),o("el-table",{attrs:{data:e.blogList}},[o("el-table-column",{attrs:{label:"Title",prop:"title","show-overflow-tooltip":""}}),o("el-table-column",{attrs:{label:"Name",prop:"category.name",width:"150"}}),o("el-table-column",{attrs:{label:"Top",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-switch",{on:{change:function(o){return e.blogTopChanged(t.row)}},model:{value:t.row.top,callback:function(o){e.$set(t.row,"top",o)},expression:"scope.row.top"}})]}}])}),o("el-table-column",{attrs:{label:"Recommend",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-switch",{on:{change:function(o){return e.blogRecommendChanged(t.row)}},model:{value:t.row.recommend,callback:function(o){e.$set(t.row,"recommend",o)},expression:"scope.row.recommend"}})]}}])}),o("el-table-column",{attrs:{label:"Visibility",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-link",{attrs:{icon:"el-icon-edit",underline:!1},on:{click:function(o){return e.editBlogVisibility(t.row)}}},[e._v(" "+e._s(t.row.published?""!==t.row.password?"Password protection":"Public":"Private")+" ")])]}}])}),o("el-table-column",{attrs:{label:"Create Time",width:"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("dateFormat")(t.row.createTime)))]}}])}),o("el-table-column",{attrs:{label:"Update time",width:"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("dateFormat")(t.row.updateTime)))]}}])}),o("el-table-column",{attrs:{label:"Operation",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(o){return e.goBlogEditPage(t.row.id)}}},[e._v("Edit")]),o("el-popconfirm",{attrs:{"confirm-button-text":"Yes","cancel-button-text":"No",title:"Are you sure delete?",icon:"el-icon-delete",iconColor:"red"},on:{onConfirm:function(o){return e.deleteBlogById(t.row.id)}}},[o("el-button",{attrs:{slot:"reference",size:"mini",type:"danger",icon:"el-icon-delete"},slot:"reference"},[e._v("Delete")])],1)]}}])})],1),o("el-pagination",{attrs:{"current-page":e.queryInfo.pageNum,"page-sizes":[10,20,30,50],"page-size":e.queryInfo.pageSize,total:e.total,layout:"total, sizes, prev, pager, next, jumper",background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),o("el-dialog",{attrs:{title:"B-digital visibility",width:"30%",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("el-form",{attrs:{"label-width":"50px"},nativeOn:{submit:function(e){e.preventDefault()}}},[o("el-form-item",[o("el-radio-group",{model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[o("el-radio",{attrs:{label:1}},[e._v("Public")]),o("el-radio",{attrs:{label:2}},[e._v("Private")]),o("el-radio",{attrs:{label:3}},[e._v("Password protection")])],1)],1),3===e.radio?o("el-form-item",{attrs:{label:"Password"}},[o("el-input",{model:{value:e.visForm.password,callback:function(t){e.$set(e.visForm,"password",t)},expression:"visForm.password"}})],1):e._e(),2!==e.radio?o("el-form-item",[o("el-row",[o("el-col",{attrs:{span:6}},[o("el-switch",{attrs:{"active-text":"Appreciation"},model:{value:e.visForm.appreciation,callback:function(t){e.$set(e.visForm,"appreciation",t)},expression:"visForm.appreciation"}})],1),o("el-col",{attrs:{span:6}},[o("el-switch",{attrs:{"active-text":"Recommend"},model:{value:e.visForm.recommend,callback:function(t){e.$set(e.visForm,"recommend",t)},expression:"visForm.recommend"}})],1),o("el-col",{attrs:{span:6}},[o("el-switch",{attrs:{"active-text":"Comment"},model:{value:e.visForm.commentEnabled,callback:function(t){e.$set(e.visForm,"commentEnabled",t)},expression:"visForm.commentEnabled"}})],1),o("el-col",{attrs:{span:6}},[o("el-switch",{attrs:{"active-text":"Top"},model:{value:e.visForm.top,callback:function(t){e.$set(e.visForm,"top",t)},expression:"visForm.top"}})],1)],1)],1):e._e()],1),o("span",{attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("Cancel")]),o("el-button",{attrs:{type:"primary"},on:{click:e.saveVisibility}},[e._v("Save")])],1)],1)],1)},i=[],r=o("6350"),a=o("864d"),s={name:"BlogList",components:{Breadcrumb:r["a"]},data:function(){return{queryInfo:{title:"",categoryId:null,pageNum:1,pageSize:10},blogList:[],categoryList:[],total:0,dialogVisible:!1,blogId:0,radio:1,visForm:{appreciation:!1,recommend:!1,commentEnabled:!1,top:!1,published:!1,password:""}}},created:function(){this.getData()},methods:{getData:function(){var e=this;Object(a["d"])(this.queryInfo).then((function(t){e.blogList=t.data.blogs.list,e.categoryList=t.data.categories,e.total=t.data.blogs.total}))},search:function(){this.queryInfo.pageNum=1,this.queryInfo.pageSize=10,this.getData()},blogTopChanged:function(e){var t=this;Object(a["h"])(e.id,e.top).then((function(e){t.msgSuccess(e.msg)}))},blogRecommendChanged:function(e){var t=this;Object(a["g"])(e.id,e.recommend).then((function(e){t.msgSuccess(e.msg)}))},editBlogVisibility:function(e){this.visForm={appreciation:e.appreciation,recommend:e.recommend,commentEnabled:e.commentEnabled,top:e.top,published:e.published,password:e.password},this.blogId=e.id,this.radio=this.visForm.published?""!==this.visForm.password?3:1:2,this.dialogVisible=!0},saveVisibility:function(){var e=this;if(3===this.radio&&(""===this.visForm.password||null===this.visForm.password))return this.msgError("Password protection mode must fill in the password!");2===this.radio?(this.visForm.appreciation=!1,this.visForm.recommend=!1,this.visForm.commentEnabled=!1,this.visForm.top=!1,this.visForm.published=!1):this.visForm.published=!0,3!==this.radio&&(this.visForm.password=""),Object(a["i"])(this.blogId,this.visForm).then((function(t){e.msgSuccess(t.msg),e.getData(),e.dialogVisible=!1}))},handleSizeChange:function(e){this.queryInfo.pageSize=e,this.getData()},handleCurrentChange:function(e){this.queryInfo.pageNum=e,this.getData()},goBlogEditPage:function(e){this.$router.push("/bdigital/edit/".concat(e))},deleteBlogById:function(e){var t=this;this.$confirm('This action will permanently delete the blog <strong style="color: red">and all its comments</strong>. Do you want to delete it?<br>It is recommended to make the blog <strong style="color: red">private</strong> strong>Status!',"hint",{confirmButtonText:"Yes",cancelButtonText:"No",type:"warning",dangerouslyUseHTMLString:!0}).then((function(){Object(a["a"])(e).then((function(e){t.msgSuccess(e.msg),t.getData()}))})).catch((function(){t.$message({type:"info",message:"Undeleted"})}))}}},l=s,c=(o("f9e1"),o("2877")),u=Object(c["a"])(l,n,i,!1,null,"347361c6",null);t["default"]=u.exports},4020:function(e,t,o){"use strict";o("d3b7");var n=o("bc3a"),i=o.n(n),r=o("323e"),a=o.n(r),s=(o("a5d8"),o("5c96")),l=i.a.create({baseURL:"https://www.dev-demo.website/admin/",timeout:5e3}),c=i.a.CancelToken;l.interceptors.request.use((function(e){var t=window.localStorage.getItem("user")||"{}",o=JSON.parse(t);if("{}"!==t&&"ROLE_admin"!==o.role&&"get"!==e.method)return e.cancelToken=new c((function(e){e("Demo mode, operation is not allowed")})),e;a.a.start();var n=window.localStorage.getItem("token");return n&&(e.headers.Authorization=n),e}),(function(e){return console.info(e),Promise.reject(e)})),l.interceptors.response.use((function(e){a.a.done();var t=e.data;if(200!==t.code){var o=t.msg||"Error";return s["Message"].error(o),Promise.reject(new Error(o))}return t}),(function(e){return console.info(e),s["Message"].error(e.message),Promise.reject(e)})),t["a"]=l},"864d":function(e,t,o){"use strict";o.d(t,"d",(function(){return r})),o.d(t,"a",(function(){return a})),o.d(t,"c",(function(){return s})),o.d(t,"e",(function(){return l})),o.d(t,"h",(function(){return c})),o.d(t,"g",(function(){return u})),o.d(t,"i",(function(){return d})),o.d(t,"b",(function(){return m})),o.d(t,"f",(function(){return p}));var n=o("5530"),i=o("4020");function r(e){return Object(i["a"])({url:"blogs",method:"GET",params:Object(n["a"])({},e)})}function a(e){return Object(i["a"])({url:"blog",method:"DELETE",params:{id:e}})}function s(){return Object(i["a"])({url:"categoryAndTag",method:"GET"})}function l(e){return Object(i["a"])({url:"blog",method:"POST",data:Object(n["a"])({},e)})}function c(e,t){return Object(i["a"])({url:"blog/top",method:"PUT",params:{id:e,top:t}})}function u(e,t){return Object(i["a"])({url:"blog/recommend",method:"PUT",params:{id:e,recommend:t}})}function d(e,t){return Object(i["a"])({url:"blog/".concat(e,"/visibility"),method:"PUT",data:Object(n["a"])({},t)})}function m(e){return Object(i["a"])({url:"blog",method:"GET",params:{id:e}})}function p(e){return Object(i["a"])({url:"blog",method:"PUT",data:Object(n["a"])({},e)})}},b007:function(e,t,o){},f9e1:function(e,t,o){"use strict";o("b007")}}]);