(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7782b11a"],{"32f0":function(e,t,o){"use strict";o.d(t,"e",(function(){return n})),o.d(t,"h",(function(){return i})),o.d(t,"g",(function(){return l})),o.d(t,"b",(function(){return s})),o.d(t,"a",(function(){return c})),o.d(t,"d",(function(){return u})),o.d(t,"f",(function(){return d})),o.d(t,"c",(function(){return m}));var a=o("5530"),r=o("4020");function n(e){return Object(r["a"])({url:"jobs",method:"GET",params:Object(a["a"])({},e)})}function i(e,t){return Object(r["a"])({url:"job/status",method:"PUT",params:{jobId:e,status:t}})}function l(e){return Object(r["a"])({url:"job/run",method:"POST",params:{jobId:e}})}function s(e){return Object(r["a"])({url:"job",method:"DELETE",params:{jobId:e}})}function c(e){return Object(r["a"])({url:"job",method:"POST",data:Object(a["a"])({},e)})}function u(e){return Object(r["a"])({url:"job",method:"PUT",data:Object(a["a"])({},e)})}function d(e){return Object(r["a"])({url:"job/logs",method:"GET",params:Object(a["a"])({},e)})}function m(e){return Object(r["a"])({url:"job/log",method:"DELETE",params:{logId:e}})}},4020:function(e,t,o){"use strict";o("d3b7");var a=o("bc3a"),r=o.n(a),n=o("323e"),i=o.n(n),l=(o("a5d8"),o("5c96")),s=r.a.create({baseURL:"https://www.dev-demo.website/admin/",timeout:5e3}),c=r.a.CancelToken;s.interceptors.request.use((function(e){var t=window.localStorage.getItem("user")||"{}",o=JSON.parse(t);if("{}"!==t&&"ROLE_admin"!==o.role&&"get"!==e.method)return e.cancelToken=new c((function(e){e("Demo mode, operation is not allowed")})),e;i.a.start();var a=window.localStorage.getItem("token");return a&&(e.headers.Authorization=a),e}),(function(e){return console.info(e),Promise.reject(e)})),s.interceptors.response.use((function(e){i.a.done();var t=e.data;if(200!==t.code){var o=t.msg||"Error";return l["Message"].error(o),Promise.reject(new Error(o))}return t}),(function(e){return console.info(e),l["Message"].error(e.message),Promise.reject(e)})),t["a"]=s},"5dce":function(e,t,o){"use strict";o("87e2")},"87e2":function(e,t,o){},"98ab":function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-form",{attrs:{inline:""}},[o("el-form-item",[o("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:function(t){e.addDialogVisible=!0}}},[e._v("Add")])],1),o("el-form-item",[o("el-button",{attrs:{type:"warning",size:"mini",icon:"el-icon-document-checked"},on:{click:e.goLogPage}},[e._v("Log")])],1)],1),o("el-table",{attrs:{data:e.jobList}},[o("el-table-column",{attrs:{label:"Bean",prop:"beanName"}}),o("el-table-column",{attrs:{label:"Method",prop:"methodName"}}),o("el-table-column",{attrs:{label:"Param",prop:"params"}}),o("el-table-column",{attrs:{label:"Cron",prop:"cron"}}),o("el-table-column",{attrs:{label:"Status",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-switch",{on:{change:function(o){return e.jobStatusChanged(t.row)}},model:{value:t.row.status,callback:function(o){e.$set(t.row,"status",o)},expression:"scope.row.status"}})]}}])}),o("el-table-column",{attrs:{label:"Remark",prop:"remark"}}),o("el-table-column",{attrs:{label:"Time",width:"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("dateFormat")(t.row.createTime)))]}}])}),o("el-table-column",{attrs:{label:"Operation",width:"290"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"warning",icon:"el-icon-caret-right",size:"mini"},on:{click:function(o){return e.runOnce(t.row.jobId)}}},[e._v("Execute")]),o("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(o){return e.showEditDialog(t.row)}}},[e._v("Edit")]),o("el-popconfirm",{attrs:{"confirm-button-text":"Yes","cancel-button-text":"No",title:"Are you sure delete",icon:"el-icon-delete",iconColor:"red"},on:{onConfirm:function(o){return e.deleteJobById(t.row.jobId)}}},[o("el-button",{attrs:{slot:"reference",size:"mini",type:"danger",icon:"el-icon-delete"},slot:"reference"},[e._v("Delete")])],1)]}}])})],1),o("el-pagination",{attrs:{"current-page":e.queryInfo.pageNum,"page-sizes":[10,20,30,50],"page-size":e.queryInfo.pageSize,total:e.total,layout:"total, sizes, prev, pager, next, jumper",background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),o("el-dialog",{attrs:{title:"Add Task",width:"50%",visible:e.addDialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.addDialogVisible=t},close:e.addDialogClosed}},[o("el-form",{ref:"addFormRef",attrs:{model:e.addForm,rules:e.formRules,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"bean",prop:"beanName"}},[o("el-input",{model:{value:e.addForm.beanName,callback:function(t){e.$set(e.addForm,"beanName",t)},expression:"addForm.beanName"}})],1),o("el-form-item",{attrs:{label:"Method",prop:"methodName"}},[o("el-input",{model:{value:e.addForm.methodName,callback:function(t){e.$set(e.addForm,"methodName",t)},expression:"addForm.methodName"}})],1),o("el-form-item",{attrs:{label:"Param",prop:"params"}},[o("el-input",{model:{value:e.addForm.params,callback:function(t){e.$set(e.addForm,"params",t)},expression:"addForm.params"}})],1),o("el-form-item",{attrs:{label:"Cron",prop:"cron"}},[o("el-input",{model:{value:e.addForm.cron,callback:function(t){e.$set(e.addForm,"cron",t)},expression:"addForm.cron"}})],1),o("el-form-item",{attrs:{label:"Remark",prop:"remark"}},[o("el-input",{model:{value:e.addForm.remark,callback:function(t){e.$set(e.addForm,"remark",t)},expression:"addForm.remark"}})],1)],1),o("span",{attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("Cancel")]),o("el-button",{attrs:{type:"primary"},on:{click:e.addJob}},[e._v("Save")])],1)],1),o("el-dialog",{attrs:{title:"Edit Task",width:"50%",visible:e.editDialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.editDialogVisible=t},close:e.editDialogClosed}},[o("el-form",{ref:"editFormRef",attrs:{model:e.editForm,rules:e.formRules,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"bean",prop:"beanName"}},[o("el-input",{model:{value:e.editForm.beanName,callback:function(t){e.$set(e.editForm,"beanName",t)},expression:"editForm.beanName"}})],1),o("el-form-item",{attrs:{label:"Method",prop:"methodName"}},[o("el-input",{model:{value:e.editForm.methodName,callback:function(t){e.$set(e.editForm,"methodName",t)},expression:"editForm.methodName"}})],1),o("el-form-item",{attrs:{label:"Param",prop:"params"}},[o("el-input",{model:{value:e.editForm.params,callback:function(t){e.$set(e.editForm,"params",t)},expression:"editForm.params"}})],1),o("el-form-item",{attrs:{label:"Cron",prop:"cron"}},[o("el-input",{model:{value:e.editForm.cron,callback:function(t){e.$set(e.editForm,"cron",t)},expression:"editForm.cron"}})],1),o("el-form-item",{attrs:{label:"Remark",prop:"remark"}},[o("el-input",{model:{value:e.editForm.remark,callback:function(t){e.$set(e.editForm,"remark",t)},expression:"editForm.remark"}})],1)],1),o("span",{attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("Cancel")]),o("el-button",{attrs:{type:"primary"},on:{click:e.editJob}},[e._v("Save")])],1)],1)],1)},r=[],n=o("5530"),i=o("6350"),l=o("32f0"),s={name:"ScheduleJobList",components:{Breadcrumb:i["a"]},data:function(){return{queryInfo:{pageNum:1,pageSize:10},jobList:[],total:0,addDialogVisible:!1,editDialogVisible:!1,addForm:{beanName:"",methodName:"",params:"",cron:"",remark:""},editForm:{},formRules:{beanName:[{required:!0,message:"Please enter the bean name",trigger:"blur"}],methodName:[{required:!0,message:"Please enter the method name ",trigger:"blur"}],cron:[{required:!0,message:"Please enter cron expression",trigger:"blur"}]}}},created:function(){this.getData()},methods:{getData:function(){var e=this;Object(l["e"])(this.queryInfo).then((function(t){e.jobList=t.data.list,e.total=t.data.total}))},handleSizeChange:function(e){this.queryInfo.pageSize=e,this.getData()},handleCurrentChange:function(e){this.queryInfo.pageNum=e,this.getData()},jobStatusChanged:function(e){var t=this,o=e.status?"Enable":"Disable";this.$confirm('Are you sure you want to <strong style="color: red">'.concat(o,"</strong> this task? "),"B-digital",{confirmButtonText:"Yes",cancelButtonText:"No",type:"warning",dangerouslyUseHTMLString:!0}).then((function(){Object(l["h"])(e.jobId,e.status).then((function(e){t.msgSuccess(e.msg)}))})).catch((function(){e.status=!e.status}))},runOnce:function(e){var t=this;this.$confirm("Are you sure you want to execute the task immediately? ","B-digital",{confirmButtonText:"Yes",cancelButtonText:"No",type:"warning"}).then((function(){Object(l["g"])(e).then((function(e){t.msgSuccess(e.msg)}))})).catch((function(){t.$message({type:"info",message:"Cancelled"})}))},deleteJobById:function(e){var t=this;Object(l["b"])(e).then((function(e){t.msgSuccess(e.msg),t.getData()}))},showEditDialog:function(e){this.editForm=Object(n["a"])({},e),this.editDialogVisible=!0},addDialogClosed:function(){this.$refs.addFormRef.resetFields()},editDialogClosed:function(){this.editForm={},this.$refs.editFormRef.resetFields()},addJob:function(){var e=this;this.$refs.addFormRef.validate((function(t){t&&Object(l["a"])(e.addForm).then((function(t){e.msgSuccess(t.msg),e.addDialogVisible=!1,e.getData()}))}))},editJob:function(){var e=this;this.$refs.editFormRef.validate((function(t){t&&Object(l["d"])(e.editForm).then((function(t){e.msgSuccess(t.msg),e.editDialogVisible=!1,e.getData()}))}))},goLogPage:function(){this.$router.push("/log/job")}}},c=s,u=(o("5dce"),o("2877")),d=Object(u["a"])(c,a,r,!1,null,"0376fec8",null);t["default"]=d.exports}}]);